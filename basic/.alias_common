alias plog='tail -f /tmp/php.log'
alias s='source ~/.bash_profile  '
alias ecliStart='fn_eclim_start'
alias ecliStop='fn_eclim_stop'
alias ecliUpdate='ecliUpdate'
alias f='findFile'
alias vi='vim -p'
alias vim='vim -p'
alias Grep='grep'
alias cpu="ps aux | awk '{printf \"CPU Usage: %s Process: %s\n\n\", \$3, \$0}' | sort -n"
alias cpuSum="ps aux | awk '{sum += \$3} END {print sum}'"
alias mem="ps aux | awk '{printf \"%s %s\n\",\$4,\$0}' | sort -n"
alias memSum="ps aux | awk '{sum += \$4} END {print sum}' "
alias myHelp='fn_help'
alias ntpSync='sudo ntpdate -s time.stdtime.gov.tw'
alias gitDeleteBranch='fnGitDeleteBranch'
alias gitForceCommit='fnGitForceCommit'

alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'
alias .....='cd ../../../..'
alias ......='cd ../../../../..'

# date to timestamp
alias d2t='fn_d2t'

fn_d2t() {
    command="date -d "$1" +%s"
    echo $command
    echo `$command`
}

fn_help() {
    echo "mem: get the process using most memory"
    echo "memSum: get sum of memory usage"
    echo "ecliStart: start eclim"
    echo "ecliUpdate: Update .class of java mvn project"


}


fn_eclim_start() {
    if [ `uname` == 'Darwin' ]; then
        ps aux |grep -i ecli |grep -v grep | awk '{printf "kill -9 %s\n",$2}' | sudo sh
        open $HOME/.vim/Eclipse.app
        echo "Wait for eclipse start"
        sleep 50
        DISPLAY=:1 $HOME/.vim/Eclipse.app/Contents/Eclipse/eclimd -b
        echo "Wait 20 seconds for eclim start."
        sleep 20
    else
        ps aux |grep -i Xvfb |grep -v grep | awk '{printf "kill -9 %s\n",$2}' | sudo sh
        sudo Xvfb :1 -screen 0 1024x768x24 &
        DISPLAY=:1 ~/.vim/eclipse/eclipse -nosplash -consolelog -debug -application org.eclipse.equinox.p2.director   -repository http://download.eclipse.org/releases/juno      -installIU org.eclipse.wst.web_ui.feature.feature.group&
        echo "Wait for eclipse start"
        sleep 50
        DISPLAY=:1 ~/.vim/eclipse/eclimd -b
        echo "Wait 20 seconds for eclim start."
        sleep 20
    fi
}

fn_eclim_stop() {
    ps aux |grep -i ecli |grep -v grep | awk '{printf "kill -9 %s\n",$2}' | sudo sh
    ps aux |grep -i Xvfb |grep -v grep | awk '{printf "kill -9 %s\n",$2}' | sudo sh
}

ecliUpdate() {
    sudo mvn eclipse:clean eclipse:eclipse;
    sudo chmod 777 .classpath
    sed 's/kind="var"/kind="lib"/' -i .classpath
    h=`echo $HOME | sed 's/\//\\\\\//g'`
    sed "s/M2_REPO/$h\/.m2\/repository/" -i .classpath
}


findFile () {
    text="*$@*"
    find ./ -iname  $text
}

fnGitDeleteBranch() {
    echo -e "git branch -D $1\n"
    echo -e "git push origin --delete $1\n"
    git branch -D $1
    git push origin --delete $1
}

fnGitForceCommit() {
    echo -e "git commit -m "$1" --no-verify\n"
    git commit -m "$1" --no-verify
}
